<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Hank" />


     
        <meta name="baidu-site-verification" content="baidusitemap,xml" />
    
     
        <meta name="google-site-verification" content="setmap.xml" />
    


<meta name="description" content="关注WEB前端，前端开发，随笔">
<meta property="og:type" content="website">
<meta property="og:title" content="Huangjihua's Blog">
<meta property="og:url" content="http://huangjihua.com.cn/page/2/index.html">
<meta property="og:site_name" content="Huangjihua's Blog">
<meta property="og:description" content="关注WEB前端，前端开发，随笔">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Huangjihua's Blog">
<meta name="twitter:description" content="关注WEB前端，前端开发，随笔">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Huangjihua&#39;s Blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css" type="text/css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Huangjihua&#39;s Blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: false
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>





    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?07c425d4bcfc27b868657ca3f2a6e187";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/hank.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Hank</a></h1>
        </hgroup>

        
        <p class="header-subtitle">填坑手艺人的随笔</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/essays/">我的随笔</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:steven.online@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/huangjihua" title="GitHub"></a>
                            
                                <a class="fa Coding" href="https://coding.net/u/huangjihua" title="Coding"></a>
                            
                                <a class="fa 知乎" href="https://www.zhihu.com/people/hank-45-19/activities" title="知乎"></a>
                            
                                <a class="fa 简书" href="http://www.jianshu.com/users/8ece324ede55/timeline" title="简书"></a>
                            
                                <a class="fa SegmentFault" href="https://segmentfault.com/u/hankblog" title="SegmentFault"></a>
                            
                                <a class="fa 博客园" href="http:www.cnblogs.com/huangjihua" title="博客园"></a>
                            
                                <a class="fa CSDN" href="http://blog.csdn.cn/huangjihua0402" title="CSDN"></a>
                            
                                <a class="fa 新浪微博" href="http://weibo.com/236797891" title="新浪微博"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/atom/">Atom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http-https/">HTTP/HTTPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-tool/">Web Tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Hank</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/hank.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Hank</a></h1>
            </hgroup>
            
            <p class="header-subtitle">填坑手艺人的随笔</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/essays/">我的随笔</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:steven.online@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/huangjihua" title="GitHub"></a>
                            
                                <a class="fa Coding" target="_blank" href="https://coding.net/u/huangjihua" title="Coding"></a>
                            
                                <a class="fa 知乎" target="_blank" href="https://www.zhihu.com/people/hank-45-19/activities" title="知乎"></a>
                            
                                <a class="fa 简书" target="_blank" href="http://www.jianshu.com/users/8ece324ede55/timeline" title="简书"></a>
                            
                                <a class="fa SegmentFault" target="_blank" href="https://segmentfault.com/u/hankblog" title="SegmentFault"></a>
                            
                                <a class="fa 博客园" target="_blank" href="http:www.cnblogs.com/huangjihua" title="博客园"></a>
                            
                                <a class="fa CSDN" target="_blank" href="http://blog.csdn.cn/huangjihua0402" title="CSDN"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/236797891" title="新浪微博"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-javascript中new到底做了什么？又如何理解prototype？" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/29/javascript中new到底做了什么？又如何理解prototype？/" class="article-date">
      <time datetime="2015-11-29T02:40:58.000Z" itemprop="datePublished">2015-11-29</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/29/javascript中new到底做了什么？又如何理解prototype？/">javascript中new到底做了什么？又如何理解prototype？</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="javascript中new到底做了什么？又如何理解prototype？">javascript中new到底做了什么？又如何理解prototype？</h1><p>说到prototype就得先说说new了。我们先看看这样一段代码：</p>
<pre><code><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{};
<span class="keyword">var</span> p = <span class="keyword">new</span> Person();
</code></pre><p> 很简单的一段代码，我们来看看这个new究竟做了什么？我们可以把new的过程拆分成以下三步：</p>
<ol>
<li>var p={}; 也就是说，初始化一个对象p</li>
<li>p.<strong>proto</strong>=Person.prototype;</li>
<li>Person.call(p);也就是说构造p，也可以称之为初始化p。</li>
</ol>
<p>关键在于第二步，我们来证明一下,如果这段代码会返回true。说明我们步骤2的正确：</p>
<pre><code><span class="built_in">console</span>.log(p.__proto__ === Person.prototype); <span class="regexp">//</span>结果果然是<span class="literal">true</span>
</code></pre><h4 id="那么proto是什么？">那么<strong>proto</strong>是什么？</h4><p>   我们在这里简单地说下。每个对象都会在其内部初始化一个属性，就是<strong>proto</strong>，当我们访问一个对象的属性 时，如果这个对象内部不存在这个属性，那么他就会去<strong>proto</strong>里找这个属性，这个<strong>proto</strong>又会有自己的<strong>proto</strong>，于是就这样 一直找下去，也就是我们平时所说的原型链的概念。</p>
<p>   按照标准，<strong>proto</strong>是不对外公开的，也就是说是个私有属性，但是Firefox的引擎将他暴露了出来成为了一个共有的属性，我们可以对外访问和设置。</p>
<p>好，概念说清了，让我们看一下下面这些代码：</p>
<pre><code><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> <span class="params">()</span>
 </span>{ };
Person.prototype.Say = <span class="function"><span class="keyword">function</span> <span class="params">()</span>
 </span>{
    alert(<span class="string">"Person say"</span>);
    }
    <span class="keyword">var</span> p = <span class="keyword">new</span> Person();
    p.Say();
</code></pre><p>这段代码很简单，相信每个人都这样写过，那就让我们看下为什么p可以访问Person的Say。</p>
<p>首先var p=new Person()；可以得出p.<strong>proto</strong>=Person.prototype。那么当我们调用p.Say()时，首先p中没有Say这个属性， 于是，他就需要到他的<strong>proto</strong>中去找，也就是Person.prototype，而我们在上面定义了 Person.prototype.Say=function(){}; 于是，就找到了这个方法。</p>
<p>好，接下来，让我们看个更复杂的。</p>
<pre><code><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>{ };
Person.prototype.Say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>{
    <span class="built_in">console</span>.log(<span class="string">"Person say"</span>);
}
Person.prototype.Salary = <span class="number">50000</span>;

<span class="keyword">var</span> Programmer = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>{ };
Programmer.prototype = <span class="keyword">new</span> Person();
Programmer.prototype.WriteCode = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>{
    <span class="built_in">console</span>.log(<span class="string">"programmer writes code"</span>);
};

Programmer.prototype.Salary = <span class="number">500</span>;

<span class="keyword">var</span> p = <span class="keyword">new</span> Programmer();
p.Say();
p.WriteCode();
<span class="built_in">console</span>.log(p.Salary);
</code></pre><p>我们来做这样的推导：</p>
<p><code>var p= new Programmer()</code>可以得出<code>p.__proto__=Programmer.prototype</code>;</p>
<p>而在上面我们指定了<code>Programmer.prototype = new Person();</code>我们来这样拆分，<code>var p1=new Person();Programmer.prototype=p1</code>;那么:</p>
<pre><code>p1.__proto_<span class="number">_</span>=Person.<span class="keyword">prototype</span>;

Programmer.<span class="keyword">prototype</span>.__proto_<span class="number">_</span>=Person.<span class="keyword">prototype</span>;
</code></pre><p>由根据上面得到<code>p.__proto__=Programmer.prototype</code>。可以得到</p>
<pre><code>p.<span class="strong">__proto__</span>.<span class="strong">__proto__</span>=Person.prototype。
</code></pre><p>好，算清楚了之后我们来看上面的结果,p.Say()。由于p没有Say这个属性，于是去p.<strong>proto</strong>，也就是 Programmer.prototype，也就是p1中去找，由于p1中也没有Say，那就去p.<strong>proto</strong>.<strong>proto</strong>，也就是 Person.prototype中去找，于是就找到了alert(“Person say”)的方法。</p>
<p>其余的也都是同样的道理。</p>
<p>这也就是原型链的实现原理。</p>
<p>最后，其实prototype只是一个假象，他在实现原型链中只是起到了一个辅助作用，换句话说，他只是在new的时候有着一定的价值，而原型链的本质，其实在于<strong>proto</strong>！</p>
<p>new 操作符<br>在有上面的基础概念的介绍之后，在加上new操作符，我们就能完成传统面向对象的class + new的方式创建对象，在JavaScript中，我们将这类方式成为Pseudoclassical。<br>基于上面的例子，我们执行如下代码</p>
<pre><code><span class="keyword">var</span> obj = <span class="keyword">new</span> Base();
</code></pre><p>这样代码的结果是什么，我们在Javascript引擎中看到的对象模型是：<br><img src="/images/joo_3.png" alt="&quot;Javascript引擎中看到的对象模型&quot;"><br>new操作符具体干了什么呢?其实很简单，就干了三件事情。</p>
<pre><code>var obj 
 = {}<span class="comment">;</span>
obj.__proto__ = Base.prototype<span class="comment">;</span>
Base.call(obj)<span class="comment">;</span>
</code></pre><p>第一行，我们创建了一个空对象obj<br>第二行，我们将这个空对象的<strong>proto</strong>成员指向了Base函数对象prototype成员对象<br>第三行，我们将Base函数对象的this指针替换成obj，然后再调用Base函数，于是我们就给obj对象赋值了一个id成员变量，这个成员变量的值是”base”，关于call函数的用法，请参看陈皓《Javascript 面向对象编程》文章</p>
<p>如果我们给Base.prototype的对象添加一些函数会有什么效果呢？<br>例如代码如下： </p>
<pre><code>Base.prototype.toString = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> <span class="keyword">this</span>.id;
}
</code></pre><p>那么当我们使用new创建一个新对象的时候，根据<strong>proto</strong>的特性，toString这个方法也可以做新对象的方法被访问到。于是我们看到了：<br>构造子中，我们来设置‘类’的成员变量（例如：例子中的id），构造子对象prototype中我们来设置‘类’的公共方法。于是通过函数对象和Javascript特有的<strong>proto</strong>与prototype成员及new操作符，模拟出类和类实例化的效果。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-grunt-beginner前端自动化工具" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/02/grunt-beginner前端自动化工具/" class="article-date">
      <time datetime="2015-11-02T08:29:57.000Z" itemprop="datePublished">2015-11-02</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/02/grunt-beginner前端自动化工具/">Grunt-Beginner前端自动化工具</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p> 本文章适合对HTML、CSS、JS有一定基础，并且对Nodejs有一定的了解的同学。</p>
<h4 id="学习目标和内容">学习目标和内容</h4><hr>
<h5 id="什么事前端集成解决方案">什么事前端集成解决方案</h5><blockquote>
<p>每一个前端团队都想打造自己的前端开发体系，来帮助团队更高效的工作，目前通常都是东拼西凑，逐渐的整合的过程。</p>
</blockquote>
<p>前端集成解决方案个人理解是：</p>
<blockquote>
<p>将前端研发领域中各种分散的技术元素集中在一起，并对常见的前端开发问题、不足、缺陷和需求，所提出的一种解决问题的方案。</p>
</blockquote>
<p>不同角色理解解对比：</p>
<blockquote>
<p>开发者：解决前端工程的根本问题；<br>专家学者：一套包含<strong>框架</strong>和<strong>工具</strong>，便于开发者<strong>快速</strong>构建<strong>美丽实用</strong>的Web应用程序的工作流，同时这套工作流必须是稳健强壮的。(其中美丽和实用有时候不能同时并存)</p>
</blockquote>
<p><strong><em>解决哪些前端问题？</em></strong></p>
<blockquote>
<ul>
<li>开发团队代码风格不统一，如何强制开发规范；</li>
<li>前期开发的组件库如何维护和使用；</li>
<li>如何模块化前端项目；</li>
<li>服务器部粉前必须的压缩，检查流程如简化，流程如何完善。</li>
</ul>
</blockquote>
<h5 id="主流的方式有哪几种">主流的方式有哪几种</h5><p><img src="http://yuml.me/diagram/nofunky/usecase/(note:主流的方式 {bg:beige}),(Yeoman),(Bower),(Grunt|Gulp)"><br>推荐几款前端解决方案供大家参考：</p>
<ul>
<li>适用MAC的可视化工具： <a href="http://incident57.com/codekit/index.html" target="_blank" rel="external">Codekit</a></li>
<li>百度的<a href="http://fis.baidu.com/" target="_blank" rel="external">FIS3</a></li>
<li>腾讯的<a href="http://alloyteam.github.io/Spirit/" target="_blank" rel="external">Spirit</a></li>
</ul>
<h5 id="Grunt的定位">Grunt的定位</h5><blockquote>
<p>Yeoman,Bower,Grunt其中是怎么样一个定位呢？我们把它定位为—Build Tool</p>
</blockquote>
<h5 id="目前Grunt的竞争者">目前Grunt的竞争者</h5><blockquote>
<p>Glup是Grunt强有力的竞争对手，还有Buildy、jasy、Gmake等</p>
</blockquote>
<h4 id="准备工作">准备工作</h4><hr>
<h5 id="nodejs简介">nodejs简介</h5><p><img src="http://yuml.me/diagram/nofunky/usecase/(note:Nodejs是什么？{bg:beige}),javascript{bg:Fuchsia}^服务服端语言{bg:yellow}"></p>
<h6 id="安装">安装</h6><ul>
<li><a href="http://nodejs.org" target="_blank" rel="external">Nodejs官网</a> </li>
<li>MAC上：<a href="http://brew.sh" target="_blank" rel="external">HomeBrew</a>，这里推荐一个小工具<a href="https://www.cakebrew.com/" target="_blank" rel="external">Cakebrew</a>,可以免去我们级命令行的烦恼。</li>
<li>Linux：apt-get[ubuntu]、yum 等</li>
</ul>
<p><strong>nodejs命令行工具：</strong>mac和Linux本身就自带强大的控制台，但window虽然有cmd窗口但是它不支持bash脚本，怎么解决这个问题呢？我推荐安装git,git里包含一个git bash shell在一定程度上弥补了这个缺陷。</p>
<ul>
<li><p>NPM-Node Package Manager（Node包管理和分发工具）<br><img src="http://yuml.me/diagram/nofunky/class/[rubt;gem|Python;pypi;setuptool|PHP;Pear{bg:yellow}]"></p>
</li>
<li><p>Nodejs包括基本模块、框架和库，但是这些很多框架和库管理起来很麻烦，所以才有了NPM,<code>npm</code>能很快的找到特定服务要使用的包，然后进行下载/安装/管理。</p>
</li>
</ul>
<h6 id="命令的使用">命令的使用</h6><pre><code><span class="comment">#npm常用命令</span>
<span class="built_in">npm</span> -v          <span class="comment">#显示版本，检查npm 是否正确安装。</span>
<span class="built_in">npm</span> install express   <span class="comment">#安装express模块</span>
<span class="built_in">npm</span> install -g express  <span class="comment">#全局安装express模块</span>
<span class="built_in">npm</span> list         <span class="comment">#列出已安装模块</span>
<span class="built_in">npm</span> show express     <span class="comment">#显示模块详情</span>
<span class="built_in">npm</span> update        <span class="comment">#升级当前目录下的项目的所有模块</span>
<span class="built_in">npm</span> update express    <span class="comment">#升级当前目录下的项目的指定模块</span>
<span class="built_in">npm</span> update -g express  <span class="comment">#升级全局安装的express模块</span>
<span class="built_in">npm</span> uninstall express  <span class="comment">#删除指定的模</span>
</code></pre><h6 id="node项目的基本结构">node项目的基本结构</h6><h5 id="Yeoman,_Bower,_Grunt简介及安装">Yeoman, Bower, Grunt简介及安装</h5><ul>
<li><a href="http://yeoman.io" target="_blank" rel="external">Yeoman</a>：The web’s scaffolding tool for modern webapps(现代webapp的脚手架工具)</li>
</ul>
<p>Yeoman的作用：</p>
<blockquote>
<ul>
<li>在Web项目立项阶段，使用yeoman来生成项目的文件，代码结构。</li>
<li>Yeoman自动将最佳实践和工具整合进来，大大加速和方便了后续的开发。</li>
</ul>
<p>根据项目自行选择Yeoman中的不同生成器，不管怎么变，Yeoman还是统一了现阶段公认的 <code>代码校验</code>、<code>测试</code>、<code>压缩</code>等最基本功能的流程,其余部分就交给 <code>生成器自由发挥</code></p>
</blockquote>
<pre><code>npm <span class="keyword">install</span> -g yo <span class="comment">#全局安装yeoman</span>
</code></pre><ul>
<li><p><a href="http://bower.io" target="_blank" rel="external">Bower</a>：A package manager for the web(Web的包管理器)</p>
<blockquote>
<p>Web站点组成:框架，库，公共部分等，Bower则用来跟踪管理这些</p>
</blockquote>
</li>
<li><p><a href="http://gruntjs.com/" target="_blank" rel="external">Brunt</a>:The JavaScript Task Runner(JavaScript 世界的构建工具)</p>
<blockquote>
<p>为何要用构建工具？<br>一句话：自动化。对于需要反复重复的任务，例如压缩（minification）、编译、单元测试、linting等，自动化工具可以减轻你的劳动，简化你的工作。当你在 Gruntfile 文件正确配置好了任务，任务运行器就会自动帮你或你的小组完成大部分无聊的工作。</p>
</blockquote>
</li>
</ul>
<h4 id="Yeoman实践">Yeoman实践</h4><pre><code>npm <span class="keyword">install</span> -g generator-angular <span class="comment">#全局安装 angular</span>
npm <span class="keyword">install</span> -g generator-mobile <span class="comment">#全局安装 mobile</span>
npm <span class="keyword">install</span> -g generator-webapp <span class="comment">#全局安装 webapp</span>
</code></pre><blockquote>
<p>接下来新建angular项目为例</p>
</blockquote>
<pre><code>mkdir yo-<span class="built_in">action</span> <span class="preprocessor">#新建目录</span>
cd yo-<span class="built_in">action</span> 
mkdir angular-<span class="built_in">action</span> <span class="preprocessor">#新建项目目录</span>
cd angular-aciton
yo angular helloAngular <span class="preprocessor">#创建angular项目 helloAngular项目名称</span>
   <span class="preprocessor">#选用grunt</span>
   <span class="preprocessor">#sass是否包含自行选择（sass基于ruby，要求有ruby环境）和 bootStrap框架等</span>
dir <span class="preprocessor">#安装完成之后 查看目录</span>
ls -al<span class="preprocessor"># ls列出当前目录下的bash命令 -al表示列出隐藏文件以及一点开头的文件</span>
</code></pre><blockquote>
<p><code>ruby</code>安装、解决<a href="http://www.w3cplus.com/sassguide/install.html" target="_blank" rel="external">sass</a>未翻墙不能安装等问题。<br>接下来看看项目下的<code>pageage.json</code>文件</p>
</blockquote>
<pre><code> {
 <span class="string">"name"</span>: <span class="string">"helloangular"</span>, <span class="preprocessor">#项目名</span>
 <span class="string">"version"</span>: <span class="string">"0.0.0"</span>,<span class="preprocessor">#版本号，递增</span>
 <span class="string">"dependencies"</span>: {} <span class="preprocessor">#项目在生产环境中需要的依赖</span>
 <span class="string">"devDependencies"</span>: {
    <span class="string">"grunt"</span>: <span class="string">"^0.4.5"</span>, <span class="preprocessor"># ^表示对版本比较宽松的限制，只限制主版本号，如果有新版本自动更新，直到<span class="number">1.</span>x.x之前的版本都可以</span>
    <span class="string">"grunt-newer"</span>: <span class="string">"~1.1.0"</span>, <span class="preprocessor"># ~只更新<span class="number">1.1</span><span class="number">.0</span>到<span class="number">1.1</span><span class="number">.9</span> </span>
   },
 <span class="string">"scripts"</span>: {
    <span class="string">"test"</span>: <span class="string">"grunt test"</span>，
    “install”:<span class="string">""</span>  <span class="preprocessor"># 执行npm install 会根据package.json文件中的组件来安装</span>
   }
 }

rm -rf node_modules <span class="preprocessor">#rm 删除目录命令 -rf递归删除且不需二次确认</span>
</code></pre><ul>
<li>目录说明<blockquote>
<p>pakeage.json :这是NodeJS模块的“信息图”<br>bower.json :指定我们可以通过bower去拉哪些相应的前端框架和组件<br>.yo-rc.json<br>.travis.yml :专为开源打造的持续集成环境<br>.jshintrc  :jshin配置文件<br>.gitignore ：指定当前项目要忽略不上传到git的文件<br>.gitattributes  :git配置项<br>.editorconfig  :第三方工具<br>.bowerrc  :bower本身的配置项<br>test目录下的文件 ：项目自动化测试<br>bower_components ：线上拉下来的前端框架</p>
</blockquote>
</li>
</ul>
<h4 id="Bower实践">Bower实践</h4><hr>
<ol>
<li><p>接下来就bower是如何对web框架和组件进行管理的，利用jQuery和bootstrap为例。</p>
<pre><code><span class="label">mkdir</span> <span class="keyword">bower-action </span>#创建<span class="keyword">bower测试目录
</span><span class="label">cd</span> <span class="keyword">bower-action
</span><span class="label">mkdir</span> jquery-<span class="keyword">bootstrap-aciton </span>#项目目录
<span class="label">cd</span> jquery-<span class="keyword">bootstrap-action
</span><span class="keyword">bower </span>install jquery
<span class="keyword">bower </span>intall <span class="keyword">bootstrap
</span><span class="label">ls</span> -al #安装完成后，查看目录下多了一个<span class="keyword">bower_components目录
</span><span class="label">cd</span> <span class="keyword">bower_components </span>#目录下就有了jquery和<span class="keyword">bootstrap</span>
</code></pre></li>
<li><p>如果组件比较小，没有在bower上注册，怎么办？</p>
<blockquote>
<p>bower提供多种安装方式:</p>
</blockquote>
</li>
</ol>
<ul>
<li>通过github的短语安装 <img src="http://i.imgur.com/VKUiCwJ.png" alt=""></li>
</ul>
<pre><code><span class="keyword">bower </span>install jquery/jquery
</code></pre><ul>
<li>用过完整的github地址安装 </li>
</ul>
<pre><code>bower install <span class="string">https:</span><span class="comment">//github.com/jquery/jquery.git</span>
</code></pre><ol>
<li>框架和组件，github上没有怎么办？<blockquote>
<p>bower提供了直接通过url地址安装<br>以上bower生成的文件中并没有包含bower.json和.bowerrc两个配置文件：需要初始化生成</p>
</blockquote>
</li>
</ol>
<pre><code><span class="title">bower</span> init <span class="comment">#初始化后根据提示设置</span>
</code></pre><blockquote>
<p>手动生成一个.bowerrc,说说其配置</p>
</blockquote>
<pre><code>{
  <span class="string">"directory"</span>: <span class="string">"bower_components"</span>,
  <span class="string">"proxy"</span>:<span class="string">"http://proxy.kyj.com:8080"</span>, <span class="preprocessor">#为了网络安全，设置一层代理</span>
  <span class="string">"https-proxy"</span>:<span class="string">"https://proxy.kyj.com:8080"</span>,
  <span class="string">"timeout"</span>:<span class="number">60000</span> <span class="preprocessor">#超时 毫秒</span>
}
</code></pre><blockquote>
<p>项目中如果单独使用bower，在项目中引用这些框架和组件非常麻烦，所以一定要配合grunt一起使用，提供开发效率。</p>
<h4 id="Grunt实践">Grunt实践</h4><hr>
</blockquote>
<pre><code>mkdir grunt-action
cd grunt-action
mkdir grunt-yo
cd grunt-yo
yo webapp  grunt-yo #注意需要安装：npm install -g yeoman/generator-webpp
#项目出现<span class="number">3</span>个选项
<span class="comment">(*)Sass #对css3的扩展，增加了规则、变量、混入、选择器、继承等等特性
(*)</span>BootStrap
<span class="comment">(*)Modernizr #用来检测用户浏览器是否支持某些HTML5和CSS3新特性的一个js库</span>
</code></pre><blockquote>
<p>接下来讲解一Gruntfile.js —</p>
</blockquote>
<pre><code><span class="string">'use strict'</span>;<span class="comment">#遵循ECMAScript（ES5）严格模式，体现js更合理、更安全、更严谨的发展方向</span>
module.exports = <span class="function"><span class="keyword">function</span> <span class="params">(grunt)</span> </span>{
<span class="comment">#所有的gruntpage和逻辑代码都要放入该函数</span>

<span class="comment">// 自动加载package.json里声明的 grunt tasks </span>
<span class="comment">// [jit-grunt](https://github.com/shootaroo/jit-grunt)自动加载所需任务 也可以使用load-grunt-tasks插件来加载</span>
  <span class="keyword">require</span>(<span class="string">'jit-grunt'</span>)(grunt, {
    useminPrepare: <span class="string">'grunt-usemin'</span>
  });
 <span class="comment">// Configurable paths</span>
 <span class="keyword">var</span> config = {
    app: <span class="string">'app'</span>,
    dist: <span class="string">'dist'</span>
 };
 <span class="comment">#grunt重要的概念:task（任务）,initConfig里配置的是一个一个的单元task</span>
 grunt.initConfig({
    config: config,
    watch: {
      bower: {  <span class="comment">#任务watch的第一个目标</span>
        files: [<span class="string">'bower.json'</span>], <span class="comment">#属性是可选的</span>
        tasks: [<span class="string">'wiredep'</span>]
      }，
      babel: {  <span class="comment">#任务watch的第二个目标</span>
        files: [<span class="string">'&lt;%= config.app %&gt;/scripts/{,*/}*.js'</span>],
        tasks: [<span class="string">'babel:dist'</span>]
      }
    }
  }
}
</code></pre><p>本人在window环境测试，需要注意几个问题：</p>
<blockquote>
<p>1.检查是否安装好ruby并安装好sass，sass在3.3.0之后版本提供了<a href="http://code.tutsplus.com/tutorials/source-maps-101--net-29173" target="_blank" rel="external">sourcemap</a>功能<br>2.检查<a href="https://github.com/Medium/phantomjs" target="_blank" rel="external">phantomjs</a>是否全局安装成功，yo生成webapp会报相关错误。<br>3.全局安装generator-mocha<br>4.运行grunt如果有Plugin没有安装报错，安装一下，比如grunt-mocha,grunt-contrib-sass等</p>
<h5 id="Grunt的Task,Target和Options">Grunt的Task,Target和Options</h5></blockquote>
<h5 id="从无到有构建Grunt项目">从无到有构建Grunt项目</h5><h5 id="初识Grunt_Files处理方式">初识Grunt Files处理方式</h5><h5 id="剖析Grunt_Tasks_-_grunt_serve">剖析Grunt Tasks - grunt serve</h5><h5 id="剖析Grunt_Tasks_-_grunt_test">剖析Grunt Tasks - grunt test</h5><h5 id="剖析Grunt_Tasks_-_grunt_build">剖析Grunt Tasks - grunt build</h5><h4 id="Grunt_-_plugins">Grunt - plugins</h4><hr>
<h5 id="剖析Grunt_-_plugins（一）">剖析Grunt - plugins（一）</h5><h4 id="扩展知识介绍">扩展知识介绍</h4><hr>
<h5 id="gulp-in-action（一）">gulp-in-action（一）</h5><h5 id="npm-in-action">npm-in-action</h5><h4 id="总结">总结</h4>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/nodejs/">Nodejs</a><a class="article-category-link" href="/categories/nodejs/web-tool/">Web Tool</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">Nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web-tool/">Web Tool</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Sass和Compass用法以及Ruby安装" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/29/Sass和Compass用法以及Ruby安装/" class="article-date">
      <time datetime="2015-10-29T02:40:58.000Z" itemprop="datePublished">2015-10-29</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/29/Sass和Compass用法以及Ruby安装/">Sass 和 Compass 用法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>###RubyInstaller </p>
<p>If you are on Windows, there is a great project to help you install Ruby: <a href="http://rubyinstaller.org/" target="_blank" rel="external">RubyInstaller</a>. It gives you everything you need to set up a full Ruby development environment on Windows.<br>Just download it, run it, and you are done!</p>
<h4 id="Check_whether_Ruby_already_is_available_by_opening_a_terminal">Check whether Ruby already is available by opening a terminal</h4><pre><code><span class="title">ruby</span> -v
</code></pre><h4 id="Try_Ruby">Try Ruby</h4><p>1.由于国内网络原因，首先我们来修改一下Ruby的source地址</p>
<pre><code>gem sources --<span class="built_in">remove</span> http<span class="variable">s:</span>//rubygems.org/ //移除默认的
gem sources -<span class="keyword">a</span> http<span class="variable">s:</span>//<span class="keyword">ruby</span>.taobao.org/ //添加新的地址
gem sources -<span class="keyword">l</span> # 查看<span class="keyword">list</span>

gem <span class="keyword">update</span> //更新<span class="keyword">ruby</span>版本
</code></pre><p>2.安装Sass<br>如果安装多个版本的sass先下载<a href="http://rubyinstaller.org/downloads" target="_blank" rel="external">DevKit</a>构建工具</p>
<pre><code>gem install sass
sass -v 
gem install sass --version=<span class="number">3.3</span> <span class="comment">//安装特定版本的sass , 但要先安装build tools 》DevKit</span>
gem <span class="built_in">list</span> <span class="comment">//列出本地的所有ruby程序包</span>
gem unistall sass -- version=<span class="number">3.3</span><span class="number">.0</span> <span class="comment">//卸载特定版本的sass</span>
</code></pre><p> 简单说一下安装devkit注意事项：</p>
<blockquote>
<p>DevKit 是windows平台下编译和使用本地C/C++扩展包的工具。它就是用来模拟Linux平台下的make, gcc, sh来进行编译。注：这个方法目前仅支持通过RubyInstaller安装的Ruby，如果不是建议你重新安装。安装方法：双击下载的7z文件，指定解压路径，路径中不能有空格。如D:/DeveloperInstall\DevKit，这个路径就是<devkit_install_dir>。<br>cd <devkit_install_dir></devkit_install_dir></devkit_install_dir></p>
</blockquote>
<pre><code>ruby dk<span class="class">.rb</span> init <span class="comment">//#生成config.yml，这里会检查将要添加DevKit支持的Ruby列表，只支持通过RubyInstaller安装的Ruby</span>
</code></pre><blockquote>
<p>如果这里列出的Ruby与你的要求不符，可以手动修改</p>
</blockquote>
<pre><code>ruby dk.rb review /<span class="regexp">/检查要添加DevKit支持的Ruby列表是否有误，可以略过
ruby dk.rb install /</span><span class="regexp">/安装后会出现以下两条信息
/</span><span class="regexp">/[INFO] Updating convenience notice gem override for 'D:/</span><span class="constant">DeveloperInstall</span>/<span class="constant">Ruby22</span><span class="string">'
//[INFO] Installing '</span><span class="constant">D</span>:<span class="regexp">/DeveloperInstall/</span><span class="constant">Ruby22</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">site_ruby</span>/<span class="title">devkit</span>.<span class="title">rb</span>'</span>

gem install rdiscount --platform=ruby /<span class="regexp">/检查是否安装成功  如果能安装rdiscount成功说明安装DevKit成功</span>
</code></pre><p>安装好DevKit后就可以安装多个版本的sass等<br><img src="http://i.imgur.com/3S0o0W2.png" alt=""><br>测试一下：<br>    mkdir learn-sass-cli<br>    vim main.scss //按i进入编辑后添加 *{margin:0;padding:0;} 然后按esc进入命令行模式 输入:wq 保存退出<br>    sass main.scss main.css // 转css文件<br>    sass-convert main.scss main.sass // 转.sass文件，可以了解一下sass写法</p>
<p>3.安装Compass</p>
<pre><code>gem install compass

compass <span class="built_in">create</span> learn-sass-syntax<span class="comment"> //创建compass-sass项目</span>
</code></pre><p>在命令行模式下，除了一次性编译命令，compass还有自动编译命令</p>
<pre><code>　　<span class="title">compass</span> watch
</code></pre><p>运行该命令后，只要scss文件发生变化，就会被自动编译成css文件。<br>1.sass 变量声明</p>
<pre><code>/*在.scss文件中 ---变量的声明
<span class="variable">$headline-ff</span>:Arial,Verdana,Helvetica,sans-serif;
<span class="variable">$main-sec-ff</span>:Arial,Verdana,Helvetica,sans-serif;
</code></pre><p>2.scss中包含已有的.scss文件 </p>
<blockquote>
<p>例如：把上面的变量存在一个新建的_variables.scss文件中，由于变量不用被转化成css文件，所以在文件名前加下划线：表示局部文件</p>
</blockquote>
<pre><code>@<span class="keyword">import</span> <span class="string">"varables"</span>; //scss文件中的<span class="keyword">import</span>并非css中的<span class="keyword">import</span>，css中<span class="keyword">import</span>必须放在代码最前面，对性能也不利，css文件中不建议用<span class="keyword">import</span>指令
</code></pre><p>3.引入时没有带入下划线：基于sass的既定规则</p>
<blockquote>
<p>1.没有文件后缀名的时候，sass会添加.scss或.sass的后缀<br>2.同一目录下，局部文件和非局部文件不能重名</p>
</blockquote>
<p>4.使用css原生@import的既定规则：</p>
<blockquote>
<p>1.当@import后边跟的文件名是以.css结尾的时候<br>2.当@import后边跟的是<a href="http://开头的字符串的时候" target="_blank" rel="external">http://开头的字符串的时候</a><br>3.当@import后边跟的是一个url()函数的时候<br>4.当@import后边带有media queries的时候</p>
</blockquote>
<p>   注意：多个x需要import的文件可以写成一行，用逗号隔开</p>
<hr>
<blockquote>
<p>sass编译中文时候出现如下错误的解决方法： </p>
</blockquote>
<pre><code>error sass/screen<span class="class">.scss</span> (Line <span class="number">2</span> of sass/_variables<span class="class">.scss</span>: Invalid GBK character <span class="string">"\xE5"</span>)
</code></pre><blockquote>
<p>到ruby安装目录下的gems\2.2.0\gems\sass-3.4.19\lib\sass等目录下找到engine.rb文件，在文件里require后加上就可以了：</p>
</blockquote>
<pre><code>Encoding<span class="class">.default_external</span> = Encoding.<span class="function"><span class="title">find</span><span class="params">(<span class="string">'utf-8'</span>)</span></span>
</code></pre><hr>
<h3 id="语法注意事项">语法注意事项</h3><p>例如：</p>
<ol>
<li>如下图1：<img src="http://i.imgur.com/JDOH0iL.png" alt="a标签的hover"><br>左侧是scss文件，右边是生成后的css文件，blue的a后面多一个空格影响就很大，指a标签下面所有元素hover效果，注意<code>&amp;</code>特殊符号的应用。</li>
</ol>
<p>2.sass里提供了class嵌套，也提供了Atrribute嵌套</p>
<pre><code>//class嵌套
.mian-sec{
    font-family:<span class="variable">$main-sec-ff</span>;
    .headline{
        font-family: <span class="variable">$main-sec-ff</span>;
        font-size: <span class="number">16</span>px;
    }
}
//属性嵌套
.mian-sec{
    font-family:<span class="variable">$main-sec-ff</span>;
    .headline{
        font:{
          family: <span class="variable">$main-sec-ff</span>;
          size: <span class="number">16</span>px;
        }
    }
}
</code></pre><p>两种形式生成css结果一样：</p>
<pre><code><span class="comment">/* line 31, ../sass/screen.scss */</span>
<span class="class">.mian-sec</span> <span class="class">.headline</span> <span class="rules">{
  <span class="rule"><span class="attribute">font-family</span>:<span class="value"> Arial, Verdana, Helvetica, sans-serif</span></span>;
  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">16px</span></span></span>;
}</span>
</code></pre><ol>
<li></li>
<li></li>
<li></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/css/">CSS</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">CSS</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hexo搭建静态博客" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/15/hexo搭建静态博客/" class="article-date">
      <time datetime="2015-10-15T02:40:58.000Z" itemprop="datePublished">2015-10-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/15/hexo搭建静态博客/">hexo搭建静态博客</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="安装">安装</h4><p>系统环境 Windows 7 64bit</p>
<p>文本编辑器推荐使用 WebStorm 10,<br>文件编码选择 UTF-8<br>Git</p>
<p>安装 GitHub for Windows,<br>登录后会自动在本地配置好 SSH, 执行git shell时也不需要-config用户名和邮箱</p>
<p>新建仓库, Github Pages 的仓库名必须为your_user_name.github.io<br>your_user_name 替换成你的用户名</p>
<p>配置 SSH, 参考 SSH配置教程Node.js<br>安装 Node.js, Node 安装包里带有 npm<br>Hexo</p>
<h5 id="安装_Hexo">安装 Hexo</h5><pre><code>//2.x
npm <span class="operator"><span class="keyword">install</span> hexo -<span class="keyword">g</span>

//<span class="number">3.</span>x
npm <span class="keyword">install</span> hexo-cli -<span class="keyword">g</span>
npm <span class="keyword">install</span> hexo <span class="comment">--save</span></span>
</code></pre><p>查看 Node 版本</p>
<pre><code><span class="keyword">node</span><span class="identifier"> </span><span class="title">-v</span>
</code></pre><p>查看 Hexo 版本</p>
<pre><code>hexo <span class="property">version</span>
</code></pre><p>创建项目</p>
<pre><code><span class="title">hexo</span> init hexo-lcx
</code></pre><p>进入目录</p>
<p>cd hexo-lcx</p>
<p>也可以先建文件夹再进目录初始化</p>
<pre><code>cd hexo-lcx
hexo init

安装依赖包

//2.x
npm <span class="operator"><span class="keyword">install</span>

// <span class="number">3.</span>x
npm <span class="keyword">install</span>
// generators
npm <span class="keyword">install</span> hexo-generator-<span class="keyword">index</span> <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-generator-<span class="keyword">archive</span> <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-generator-<span class="keyword">category</span> <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-generator-tag <span class="comment">--save</span>
// <span class="keyword">server</span>
npm <span class="keyword">install</span> hexo-<span class="keyword">server</span> <span class="comment">--save</span>
// deployers
npm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-deployer-heroku <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-deployer-rsync <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-deployer-openshift <span class="comment">--save</span>
// plugins
npm <span class="keyword">install</span> hexo-renderer-marked@<span class="number">0.25</span> <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-renderer-stylus@<span class="number">0.3</span> <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-generator-feed@<span class="number">1.0</span><span class="number">.3</span> <span class="comment">--save</span>
npm <span class="keyword">install</span> hexo-generator-sitemap@<span class="number">1.0</span><span class="number">.1</span> <span class="comment">--save</span></span>
</code></pre><p>以后所有的命令都在该目录下进行</p>
<p>启动服务</p>
<pre><code>hexo <span class="keyword">server</span>
</code></pre><p>用浏览器打开 <a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a> 或者 <a href="http://127.0.0.1:4000/" target="_blank" rel="external">http://127.0.0.1:4000/</a> 就能看到网页了<br>推荐使用现代化浏览器(Chrome)获得最佳效果</p>
<p>按 Ctrl+C 停止本地预览服务<br>使用<br>目录结构</p>
<blockquote>
<p>├── .deploy       #需要部署的文件<br>├── node_modules  #Hexo插件<br>├── public        #生成的静态网页文件<br>├── scaffolds     #模板<br>├── source        #博客正文和其他源文件, 404 favicon CNAME 等都应该放在这里<br>|   ├── _drafts   #草稿<br>|   └── _posts    #文章<br>├── themes        #主题<br>├── _config.yml   #全局配置文件<br>└── package.json</p>
</blockquote>
<h5 id="全局配置__config-yml">全局配置 _config.yml</h5><p>配置文件的冒号”:”后面有空格</p>
<pre><code><span class="comment"># Site #站点信息</span>
title: Hank
subtitle: Hank's Blog
description: 关注WEB前端，前端开发
author: hank
author_title: 'Web Developer &amp; Designer'
avatar: css/images/avatar.png
location: 'Beijing, China'
follow: https://github.com/huangjihua/
language: zh-CN
since: <span class="number">2015</span>
timezone: Asia/Beijing <span class="comment">#时区</span>

<span class="comment"># URL #链接格式</span>
url: http://blog.huangjihua.com <span class="comment">#网址</span>
root: / <span class="comment">#根目录</span>
permalink: post/:title.html <span class="comment">#文章的链接格式</span>
permalink_defaults:

<span class="comment"># Directory #目录</span>
source_dir: source <span class="comment">#源文件</span>
public_dir: public <span class="comment">#生成的网页文件</span>
tag_dir: tags <span class="comment">#标签</span>
archive_dir: archives <span class="comment">#归档</span>
category_dir: categories <span class="comment">#分类</span>
code_dir: downloads/code
i18n_dir: :lang <span class="comment">#国际化</span>
skip_render:

<span class="comment"># Writing #写作</span>
new_post_name: :title.md <span class="comment">#新文章标题</span>
default_layout: post <span class="comment">#默认模板(post page photo draft)</span>
titlecase: <span class="literal">false</span> <span class="comment">#标题转换成大写</span>
external_link: <span class="literal">true</span> <span class="comment">#新标签页里打开连接</span>
filename_case: <span class="number">0</span>
render_drafts: <span class="literal">false</span>
post_asset_folder: <span class="literal">false</span>
relative_link: <span class="literal">false</span>
future: <span class="literal">true</span>
highlight: <span class="comment">#语法高亮</span>
  enable: <span class="literal">true</span>
  line_number: <span class="literal">false</span> <span class="comment">#显示行号</span>
  auto_detect: <span class="literal">true</span>
  tab_replace:

<span class="comment"># Category &amp; Tag #分类和标签</span>
default_category: uncategorized <span class="comment">#默认分类</span>
category_map:
tag_map:

<span class="comment"># Date / Time format #日期时间格式</span>
<span class="comment">## http://momentjs.com/docs/#/displaying/format/</span>
date_format: YYYY-MM-DD
time_format: HH:mm:ss

<span class="comment"># Pagination #分页</span>
per_page: <span class="number">20</span> <span class="comment">#每页文章数, 设置成 0 禁用分页</span>
pagination_dir: page

<span class="comment"># Extensions #插件和主题</span>
<span class="comment">## 插件: http://hexo.io/plugins/</span>
<span class="comment">## 主题: http://hexo.io/themes/</span>
theme: next

<span class="comment"># Deployment #部署, huangjihua是我的用户名, 同时发布在 GitHub 和 GitCafe 上面</span>
deploy:
  <span class="operator">type</span>: git
  repository:
    github: https://github.com/huangjihua/huangjihua.github.io.git,<span class="keyword">master</span>
    <span class="title">gitcafe</span>: https://gitcafe.com/huangjihua/huangjihua.git,<span class="keyword">master</span>

<span class="title"># Disqus</span> <span class="comment">#Disqus评论系统</span>
disqus_shortname:

plugins: <span class="comment">#插件，例如生成 RSS 和站点地图的</span>
- hexo-generator-feed
- hexo-generator-sitemap
</code></pre><h5 id="命令行使用">命令行使用</h5><p>常用命令:</p>
<pre><code>hexo help <span class="preprocessor">#查看帮助</span>
hexo init <span class="preprocessor">#初始化一个目录</span>
hexo <span class="keyword">new</span> <span class="string">"postName"</span> <span class="preprocessor">#新建文章</span>
hexo <span class="keyword">new</span> page <span class="string">"pageName"</span> <span class="preprocessor">#新建页面</span>
hexo generate <span class="preprocessor">#生成网页, 可以在 public 目录查看整个网站的文件</span>
hexo <span class="keyword">server</span> <span class="preprocessor">#本地预览, 'Ctrl+C'关闭</span>
hexo deploy <span class="preprocessor">#部署.deploy目录</span>
hexo clean <span class="preprocessor">#清除缓存, </span>
</code></pre><p><strong>强烈建议每次执行命令前先清理缓存, 每次部署前先删除 .deploy 文件夹</strong></p>
<p>复合命令:</p>
<pre><code>hexo deploy -g <span class="preprocessor">#生成加部署</span>
hexo <span class="keyword">server</span> -g <span class="preprocessor">#生成加预览</span>
</code></pre><p>简写：</p>
<pre><code>hexo <span class="keyword">n</span> == hexo new
hexo <span class="keyword">g</span> == hexo <span class="keyword">generate</span>
hexo s == hexo server
hexo <span class="keyword">d</span> == hexo deploy
</code></pre><p>安装插件, <plugin-name> 为插件名</plugin-name></p>
<pre><code>npm <span class="operator"><span class="keyword">install</span> &lt;<span class="keyword">plugin</span>-<span class="keyword">name</span>&gt; <span class="comment">--save #安装</span>
npm <span class="keyword">update</span> #升级
npm <span class="keyword">uninstall</span> &lt;<span class="keyword">plugin</span>-<span class="keyword">name</span>&gt; #卸载</span>
</code></pre><p>安装主题, <repository> 为主题的 git 仓库, <theme-name>为要存放在本地的目录名</theme-name></repository></p>
<pre><code>git <span class="keyword">clone</span> <span class="title">&lt;repository</span>&gt; themes/<span class="tag">&lt;theme-name&gt;</span>
</code></pre><p>#####　修改网站配置文件</p>
<pre><code><span class="attribute">theme</span>: <span class="string">&lt;theme-name&gt;</span>
</code></pre><p>编辑文章</p>
<p>新建文章</p>
<pre><code>hexo <span class="keyword">new</span> <span class="string">"标题"</span>
</code></pre><p>在 _posts 目录下会生成文件 标题.md</p>
<pre><code>title: 标题
date: <span class="number">2014</span>-<span class="number">11</span>-<span class="number">11</span> <span class="number">11</span>:<span class="number">11</span>:<span class="number">11</span>
tags:
- 标签<span class="number">1</span>
- 标签<span class="number">2</span>
- 标签<span class="number">3</span>
categories: [分类<span class="number">1</span>,分类<span class="number">2</span>,分类<span class="number">3</span>]
---
</code></pre><p>正文, 使用 Markdown 语法书写</p>
<p>编辑完后保存, hexo server 预览</p>
<h4 id="发布">发布</h4><p>以发布到 Github 为例</p>
<p>编辑全局配置文件 _config.yml 中的 deploy 部分, huangjihua为用户名</p>
<pre><code><span class="attribute">deploy</span>:
  <span class="attribute">type</span>: github
  <span class="attribute">repo</span>: <span class="attribute">https</span>:<span class="comment">//github.com/huangjihua/huangjihua.github.io.git</span>
  <span class="attribute">branch</span>: master
</code></pre><p>或者</p>
<pre><code><span class="attribute">deploy</span>:
  <span class="attribute">type</span>: github
  <span class="attribute">repository</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:huangjihua/huangjihua.github.com.git
  <span class="attribute">branch</span>: master
</code></pre><p>项目主页需要把 branch 设置为 gh-pages</p>
<p>托管到 Gitcafe 的话修改为</p>
<pre><code><span class="attribute">deploy</span>:
  <span class="attribute">type</span>: github
  <span class="attribute">repository</span>: git<span class="variable">@gitcafe</span>.<span class="attribute">com</span>:huangjihua/huangjihua.git
  <span class="attribute">branch</span>: gitcafe-pages
</code></pre><h4 id="部署">部署</h4><pre><code><span class="title">hexo</span> deploy
</code></pre><p>以下提示说明部署成功</p>
<pre><code><span class="string">[info]</span> Deploy done: github
</code></pre><p>点击 Github 上项目的 Settings, GitHub Pages, 提示 Your site is published at <a href="http://huangjihua.github.io/" target="_blank" rel="external">http://huangjihua.github.io/</a><br>第一次上传网站需要等十分钟左右, 以后每次更新都能马上打开</p>
<h5 id="绑定域名">绑定域名</h5><p>不绑定域名的话只能通过 your_user_name.github.io 访问<br>申请域名推荐 GoDaddy, 域名解析推荐 DNSPod<br>绑定顶级域名</p>
<p>新建文件 CNAME, 无后缀, 纯文本文件, 内容为要绑定的域名 huangjihua.com<br>如果要使用 www.huangjihua.com 的形式, 文件内容改为 www.huangjihua.com<br>DNS设置<br>主机记录@, 类型A, 记录值192.30.252.153<br>主机记录www, 类型A, 记录值192.30.252.153<br>参考 Tips for configuring an A record with your DNS provider<br>绑定子域名</p>
<p>比如使用域名huangjihua.com的子域名blog.huangjihua.com<br>CNAME文件内容为blog.huangjihua.com</p>
<p>DNS设置<br>主机记录blog, 类型CNAME, 记录值huangjihua.github.io<br>参考 Tips for configuring a CNAME record with your DNS provider<br>Gitcafe 绑定域名</p>
<p>项目管理界面, 左侧的导航栏中有自定义域名设置</p>
<h4 id="主题">主题</h4>


<p>代码:<br><a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external">https://github.com/ppoffice/hexo-theme-icarus</a><br>下载安装主题</p>
<pre><code>cd hexo-theme-icarus
git <span class="keyword">clone</span> <span class="title">https</span>://github.com/ppoffice/hexo-theme-icarus.git
</code></pre><p>也可以手动下载后解压到 themes 目录</p>
<p>全局配置文件 _config.yml 中 theme 改成 icarus</p>
<h5 id="主题目录结构">主题目录结构</h5><p>.<br>├── languages          #国际化<br>|   ├── default.yml    #默认<br>|   └── zh-CN.yml      #中文<br>├── layout             #布局<br>|   ├── _partial       #局部的布局<br>|   └── _widget        #小挂件的布局<br>├── script             #js脚本<br>├── source             #源代码文件<br>|   ├── css            #CSS<br>|   |   ├── _base      #基础CSS<br>|   |   ├── _partial   #局部CSS<br>|   |   ├── fonts      #字体<br>|   |   ├── images     #图片<br>|   |   └── style.styl #style.css<br>|   ├── fancybox       #fancybox<br>|   └── js             #js<br>├── _config.yml        #主题配置文件<br>└── README.md          #主题介绍</p>
<h5 id="主题配置文件">主题配置文件</h5><p>以下是主题 Icarus 的配置文件</p>
<pre><code><span class="comment"># Logo</span>
logo: css/images/logo.png <span class="comment"># Empty this to unset logo</span>
<span class="comment"># Header</span>
menu:
  首页: /
  归档: /archives
  <span class="comment">#生活: /life</span>
  <span class="comment">#分类: /categories</span>
  <span class="comment">#标签: /tags</span>
  关于: /about

<span class="comment"># Content</span>
excerpt_link: 阅读全文 <span class="comment">#替换为中文</span>
fancybox: <span class="literal">true</span>   <span class="comment">#插件添加照片 ![img caption](img url)</span>
archive_yearly: <span class="literal">true</span> <span class="comment">#按年存档</span>


<span class="comment"># Profile</span>
profile: <span class="literal">true</span> <span class="comment"># whether to show profile bar</span>
gravatar: <span class="literal">false</span> <span class="comment"># whether to use gravatar with the email</span>
showlogo: <span class="literal">false</span> <span class="comment"># whether to show the logo in the header</span>

<span class="comment"># Sidebar</span>
sidebar: right <span class="comment"># set to false if you don't want a sidebar</span>
widgets: <span class="comment">#站点右边栏，暂时默认，后面介绍修改和添加</span>
<span class="comment">#- search</span>
- recent_posts
- category
- <span class="keyword">tag</span>
<span class="title">- tagcloud</span>
- archive
- weibo
thumbnail: <span class="literal">true</span>
contacts:
  github: http://github.com/huangjihua  <span class="comment">#ppoffice/hexo-theme-icarus</span>
  weibo:  http://www.weibo.com/<span class="number">236797891</span>
  csdn: http://blog.csdn.net/huangjihua0402
  <span class="comment">#twitter: '#'</span>
  <span class="comment">#facebook: '#'</span>
  <span class="comment">#dribbble: '#'</span>
  rss: atom.<span class="keyword">xml</span> <span class="title">#rss</span>地址  默认即可

<span class="comment"># Links</span>
links:
  hank: http://www.github.com/huangjihua

<span class="comment"># CDN</span>
cdn: useso <span class="comment">#If your site loads slowly change it to "google" , because "useso" is slow out of China</span>

addthis: <span class="comment">#SNS分享，身在天朝，当然用“百度分享”，暂时默认，后面会介绍</span>
  enable: <span class="literal">true</span>
  pubid:
  facebook: <span class="literal">true</span>
  twitter: <span class="literal">true</span>
  google: <span class="literal">true</span>
  pinterest: <span class="literal">true</span>

<span class="comment"># Miscellaneous 分享</span>
google_site_verification:
google_analytics: <span class="comment">#要使用google_analytics进行统计的话，这里需要配置ID，暂时默认，后面介绍</span>
baidu_analytics: <span class="number">07</span>c425d4bcfc27b868657ca3f2a6e187
jiathis: <span class="literal">true</span>
favicon: favicon.png <span class="comment">#添加小图标</span>
baidushare: <span class="literal">true</span>
<span class="comment">#twitter:</span>
<span class="comment">#google_plus:</span>
<span class="comment">#fb_admins:</span>
<span class="comment">#fb_app_id:</span>

<span class="comment">#将 favicon.ico 文件放在 source 目录下, 修改主题配置文件</span>
</code></pre><p>语言设置</p>
<p>可用的语言及代码</p>
<pre><code>English (<span class="keyword">en</span>)
中文简体 (zh-Hans)
French (fr-FR)
正体中文 (zh-hk/zh-<span class="keyword">tw</span>)
Russian (<span class="keyword">ru</span>)
German (<span class="keyword">de</span>)
</code></pre><p>站点配置文件</p>
<pre><code><span class="label">language:</span> <span class="built_in">zh</span>-hk
</code></pre><h5 id="菜单设置">菜单设置</h5><p>编辑主题配置文件的 menu<br>若站点运行在子目录中, 将链接前缀的 / 去掉</p>
<pre><code><span class="attribute">menu</span>:
  <span class="attribute">home</span>: /
  <span class="attribute">archives</span>: /archives
  <span class="attribute">categories</span>: /categories
  <span class="attribute">tags</span>: /tags
  <span class="attribute">commonweal</span>: /<span class="number">404</span>.html
  <span class="attribute">about</span>: /about
</code></pre><p>标签云页面</p>
<p>添加一个标签云页面, 并在菜单中显示页面链接</p>
<p>新建 tags 页面</p>
<pre><code>hexo <span class="keyword">new</span> page “<span class="keyword">tags</span>”
</code></pre><p>将页面的类型设置为 tags</p>
<pre><code>title: tags
date: 2015-09-19 22:37:08
<span class="header">type: "tags"
---</span>
</code></pre><p>关闭评论</p>
<pre><code>title: tags
date: 2015-09-19 22:37:08
type: "tags"
<span class="header">comments: false
---</span>
</code></pre><p>在菜单中添加链接. 编辑主题配置文件, 添加 tags 到 menu 中</p>
<pre><code><span class="attribute">menu</span>:
  <span class="attribute">tags</span>: /tags
</code></pre><p>分类页面</p>
<p>添加一个分类页面, 并在菜单中显示页面链接</p>
<p>新建 categories 页面</p>
<pre><code>hexo <span class="keyword">new</span> page categories
</code></pre><p>将页面的类型设置为 categories</p>
<pre><code>title: categories
date: 2015-09-19 22:38:00
<span class="header">type: "categories"
---</span>
</code></pre><p>关闭评论</p>
<pre><code>title: categories
date: 2015-09-19 22:38:00
type: "categories"
<span class="header">comments: false
---</span>
</code></pre><p>在菜单中添加链接. 编辑主题配置文件, 添加 categories 到 menu 中</p>
<pre><code><span class="attribute">menu</span>:
  <span class="attribute">categories</span>: /categories
</code></pre><p>RSS 链接</p>
<p>编辑主题配置文件 rss 字段</p>
<pre><code><span class="string">rss:</span> <span class="literal">false</span>
</code></pre><p>禁用Feed链接</p>
<pre><code><span class="label">rss:</span>
</code></pre><p>默认使用站点的 Feed 链接, 需要安装 hexo-generator-feed 插件<br>浏览<a href="http://localhost:4000/atom.xml查看是否生效" target="_blank" rel="external">http://localhost:4000/atom.xml查看是否生效</a></p>
<pre><code><span class="string">rss:</span> <span class="string">http:</span><span class="comment">//your-feed-url</span>
</code></pre><p>指定特定的链接地址, 适用于已经烧制过 Feed 的情形<br>代码高亮主题</p>
<p>NexT 使用 Tomorrow Theme 作为代码高亮, 共有5款主题<br>站点建立时间</p>
<p>例如 © 2014 - 2015</p>
<p>站点配置文件新增字段 since</p>
<pre><code><span class="attribute">since</span>: <span class="string">2014</span>
</code></pre><p>数学公式显示</p>
<p>NexT 使用 MathJax 来显示数学公式, 默认关闭</p>
<p>主题配置文件 mathjax 设定为 true</p>
<pre><code><span class="preprocessor">##### MathJax Support</span>
mathjax: <span class="literal">true</span>
</code></pre><p>访问过慢可替换为其他CDN, 修改文件<br>    themes\next\layout_scripts\mathjax.swig<br>    <script type="text/javascript" src="http://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></p>
<p>侧栏设置</p>
<p>post - 默认行为, 在文章页面(拥有目录列表)时显示<br>always - 在所有页面中都显示<br>hide - 在所有页面中都隐藏(可以手动展开)</p>
<p>sidebar: post</p>
<p>头像设置</p>
<p>编辑站点配置文件, 新增字段 avatar, 头像的链接地址可以是:</p>
<pre><code>网络地址
<span class="symbol">https:</span>/<span class="regexp">/avatars2.githubusercontent.com/u</span><span class="regexp">/4962914?v=3&amp;s=460

站点内的地址
/uploads</span><span class="regexp">/avatar.jpg /</span><span class="regexp">/头像图片放置在站点的 source/uploads</span><span class="regexp">/
/images</span><span class="regexp">/avatar.jpg /</span><span class="regexp">/头像图片放置在主题的 source/images</span><span class="regexp">/</span>
</code></pre><p>avatar: /images/huangjihua_avatar.png</p>
<p>作者名称</p>
<p>编辑站点配置文件 author<br>站点描述设置</p>
<p>编辑站点配置文件 description<br>侧边栏社交链接</p>
<p>站点配置文件新增字段 social, 然后添加社交站点名称与地址</p>
<pre><code><span class="comment"># Social links</span>
<span class="symbol">social:</span>
  <span class="constant">GitHub</span>: <span class="symbol">https:</span>/<span class="regexp">/github.com/huangjihua</span>
  <span class="constant">Twitter</span>: <span class="symbol">https:</span>/<span class="regexp">/twitter.com/huangjihua</span>
  <span class="constant">Zhihu</span>: <span class="symbol">http:</span>/<span class="regexp">/www.zhihu.com/people</span><span class="regexp">/huangjihua
  Douban: http:/</span><span class="regexp">/www.douban.com/people</span><span class="regexp">/huangjihua
  #Weibo: http:/</span><span class="regexp">/weibo.com/lmlcx</span>
</code></pre><h5 id="自定义页面">自定义页面</h5><p>以关于页面为例<br>新建一个 about 页面</p>
<pre><code>hexo <span class="keyword">new</span> page <span class="string">"about"</span>
</code></pre><p>编辑 source/about/index.md：</p>
<pre><code>title: About
<span class="header">date: 2014-11-1 11:11:11
---</span>
About Me
</code></pre><p>菜单显示 about 链接, 主题配置文件中将 menu 中 about 前面的注释去掉</p>
<pre><code><span class="keyword">menu</span>:
  <span class="keyword">about</span>: /<span class="keyword">about</span>
</code></pre><p>友情链接</p>
<p>站点配置文件添加</p>
<pre><code><span class="preprocessor"># 标题</span>
links_title: 友情链接
<span class="preprocessor"># 链接</span>
links:
  Hexo: http:<span class="comment">//hexo.io/</span>
  huangjihua: http:<span class="comment">//blog.huangjihua.com/</span>
</code></pre><p>Sitemap 网站地图</p>
<p>安装插件</p>
<pre><code>npm <span class="keyword">install</span> hexo-generator-sitemap
</code></pre><p>站点配置文件里开启插件</p>
<pre><code>plugins:
<span class="bullet">- </span>hexo-generator-sitemap
</code></pre><p>浏览<a href="http://localhost:4000/sitemap.xml查看是否生效" target="_blank" rel="external">http://localhost:4000/sitemap.xml查看是否生效</a></p>
<h5 id="404_页面">404 页面</h5><p>效果 <a href="http://blog.huangjihua.com/404.html" target="_blank" rel="external">http://blog.huangjihua.com/404.html</a></p>
<p>source 目录下新建 404.html 页面</p>
<pre><code><span class="doctype">&lt;!DOCTYPE HTML&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"content-type"</span> <span class="attribute">content</span>=<span class="value">"text/html;charset=utf-8;"</span>/&gt;</span>
  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"X-UA-Compatible"</span> <span class="attribute">content</span>=<span class="value">"IE=edge,chrome=1"</span> /&gt;</span>
  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"robots"</span> <span class="attribute">content</span>=<span class="value">"all"</span> /&gt;</span>
  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"robots"</span> <span class="attribute">content</span>=<span class="value">"index,follow"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"http://www.qq.com/404/search_children.js"</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span> <span class="attribute">homePageUrl</span>=<span class="value">"your-site-url"</span> <span class="attribute">homePageName</span>=<span class="value">"回到我的主页"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</code></pre><p>文章摘录</p>
<p>NexT 支持三种方式来控制首页文章的显示方式</p>
<pre><code>在文章中使用 <span class="comment">&lt;!-- more --&gt;</span> 手动进行截断
在文章的 front-matter 中添加 description, 内容为文章摘要
自动形成摘要, 在主题配置文件中添加
</code></pre><p>设定首页/归档/标签页面文章的篇数</p>
<p>安装以下插件</p>
<pre><code>hexo-generator-<span class="built_in">index</span>
hexo-generator-archive
hexo-generator-<span class="keyword">tag</span>
</code></pre><p>站点配置文章中设定</p>
<pre><code><span class="attribute">index_generator</span>:
  <span class="attribute">per_page</span>: <span class="number">5</span>

<span class="attribute">archive_generator</span>:
  <span class="attribute">per_page</span>: <span class="number">20</span>
  <span class="attribute">yearly</span>: true
  <span class="attribute">monthly</span>: true

<span class="attribute">tag_generator</span>:
  <span class="attribute">per_page</span>: <span class="number">10</span>
</code></pre><p>优化</p>
<h5 id="多说评论系统">多说评论系统</h5><pre><code>如需取消某个页面/文章的评论, 在 md 文件的 <span class="keyword">front</span>-matter 中增加 comments: <span class="constant">false</span>
</code></pre><p>登陆多说创建站点, 多说域名 xxx.duoshuo.com 前面的 xxx 即为 duoshuo_shortname, 在站点配置文件中新增 duoshuo_shortname 字段</p>
<pre><code><span class="attribute">duoshuo_shortname</span>: <span class="string">xxx</span>
</code></pre><p>多说评论组件提供热评文章功能, 仅在文章页面显示</p>
<p>站点/主题配置文件中设置</p>
<pre><code># 多说热评文章 <span class="literal">true</span> 或者 <span class="literal">false</span>
<span class="label">duoshuo_hotartical:</span> <span class="literal">true</span>
</code></pre><p>Disqus</p>
<p>在 Disqus官网 申请新网站的 shortname<br>站点配置文件, 添加 disqus_shortname</p>
<pre><code><span class="attribute">disqus_shortname</span>: <span class="string">xxxxxxxx</span>
</code></pre><h5 id="设置网站统计">设置网站统计</h5><p>百度统计</p>
<p>登录 百度统计, 定位到站点的代码获取页面<br>复制 hm.js? 后面那串统计脚本 id<br>编辑站点配置文件, 新增字段 baidu_analytics 字段</p>
<pre><code><span class="attribute">baidu_analytics</span>: <span class="string">xxxxxxxxxxxxxxxx</span>

<span class="nginx"><span class="title">Google</span> Analytics</span>
</code></pre><p>从 Google Analytics 获取 ID<br>站点配置文件新增 google_analytics, 设置成 Google 跟踪 ID. 通常是以 UA- 开头</p>
<pre><code><span class="attribute">google_analytics</span>: <span class="string">UA-xxxxxxxx-x</span>
</code></pre><h5 id="分享">分享</h5><p>分享服务优先选择 JiaThis<br>JiaThis</p>
<p>站点/主题配置文件添加字段 jiathis, 值为 true</p>
<pre><code><span class="preprocessor"># JiaThis 分享服务</span>
jiathis: <span class="literal">true</span>
</code></pre><p>百度分享</p>
<p>站点/主题配置文件添加字段 baidushare, 值为 true</p>
<pre><code><span class="preprocessor"># 百度分享服务</span>
baidushare: <span class="literal">true</span>
</code></pre><p>多说分享</p>
<p>站点/主题配置文件添加字段 duoshuo_share, 值为 true, 多说分享必须与多说评论同时使用</p>
<pre><code><span class="preprocessor"># 多说分享服务</span>
duoshuo_share: <span class="literal">true</span>
</code></pre><h5 id="Swiftype_搜索">Swiftype 搜索</h5><p>站点配置文件新增 swiftype_key 字段, 值为 swiftype 搜索引擎的 key</p>
<pre><code><span class="preprocessor">#Swiftype Search Key</span>
<span class="label">swiftype_key:</span> xxxxxxxxx
</code></pre><p>Google Webmaster tools</p>
<p>设置 Google 站点管理工具的验证字符串, 用于提交 sitemap</p>
<pre><code>获取 google site verification <span class="tag">code</span>
登录 Google Webmaster Tools, 导航到验证方法, 并选择 HTML 标签, 将会获取到一段代码:

&lt;meta name=<span class="string">"google-site-verification"</span> <span class="attribute">content</span>=<span class="string">"XXXXXXXXXXXXXXXXXXXXXXX"</span> /&gt;

将 <span class="attribute">content</span> 里面的 XXXXXXXXXXXXXXXXXXXXXXX 复制出来, 站点配置文件新增字段 google_site_verification

google_site_verification: XXXXXXXXXXXXXXXXXXXXXXX
</code></pre><p>版权</p>
<p>参见 知识共享许可协议<br>站点配置文件新增</p>
<pre><code># Creative Commons 4.0 International License.
# http:<span class="comment">//creativecommons.org/</span>
# Available: <span class="keyword">by</span> | <span class="keyword">by</span>-nc | <span class="keyword">by</span>-nc-nd | <span class="keyword">by</span>-nc-<span class="keyword">sa</span> | <span class="keyword">by</span>-nd | <span class="keyword">by</span>-<span class="keyword">sa</span> | zero
creative_commons: <span class="keyword">by</span>-nc-<span class="keyword">sa</span>
</code></pre><p>图片显示</p>
<p>把图片放到 source/images 目录下</p>
<pre><code>![<span class="link_label">test</span>](<span class="link_url">images/xxx.jpg</span>)
</code></pre><p>推荐使用图床, 例如七牛云存储<br>自定义 404 页面</p>
<p>添加 source/404.html</p>
<p>404 页面不需要 Hexo 解析</p>
<pre><code>layout: false
--------
<span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
  <span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span>404<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"icon"</span> <span class="attribute">href</span>=<span class="value">"/favicon.ico"</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
  <span class="tag">&lt;<span class="title">body</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">align</span>=<span class="value">"center"</span>&gt;</span>
      <span class="tag">&lt;<span class="title">p</span>&gt;</span>404 你懂的<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</code></pre><h5 id="添加_robots-txt">添加 robots.txt</h5><p>source 目录下添加 robots.txt</p>
<pre><code># robots.txt
User-agen<span class="variable">t:</span> Baiduspider
Disallo<span class="variable">w:</span> /
User-agen<span class="variable">t:</span> Googlebot
Disallo<span class="variable">w:</span>
</code></pre><p>生成 post 时默认生成 categories 配置项</p>
<p>在 scaffolds/post.md 中添加</p>
<pre><code><span class="label">categories:</span>
</code></pre><p>添加 “fork me on github”</p>
<p>官方教程<br>点击加载评论</p>
<p>在 themes\next\layout_layout.swig 里找到</p>
<pre><code>&lt;<span class="operator">div</span> id=<span class="string">"disqus_thread"</span>&gt;
&lt;noscript&gt;Please enable JavaScript <span class="built_in">to</span> view <span class="operator">the</span> &lt;<span class="operator">a</span> href=<span class="string">"//disqus.com/?ref_noscript"</span>&gt;comments powered <span class="keyword">by</span> Disqus.&lt;/<span class="operator">a</span>&gt;&lt;/noscript&gt;
&lt;/<span class="operator">div</span>&gt;
</code></pre><p>在上面添加</p>
<pre><code><span class="tag">&lt;<span class="title">button</span> <span class="attribute">id</span>=<span class="value">"load-disqus"</span> <span class="attribute">onclick</span>=<span class="value">"disqus.load();"</span> <span class="attribute">style</span>=<span class="value">"background-color: #ebebeb; color: #646464; font-size: 18px; padding: 8px 12px; border-radius: 5px; border: 1px solid #ebebeb;"</span>&gt;</span>点击查看评论<span class="tag">&lt;/<span class="title">button</span>&gt;</span>
</code></pre><p>修改文件<br>themes\next\layout_scripts\comments\disqus.swig</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="handlebars"><span class="xml">

var disqus = { //添加的内容
load : function disqus(){ //添加的内容

      var disqus_shortname = '<span class="comment"></span>';
      var disqus_identifier = '<span class="comment"></span>';
      var disqus_title = '<span class="comment"></span>';
      var disqus_url = '<span class="comment"></span>';
      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
      run_disqus_script('count.js');
      <span class="comment"></span>

$('#load-disqus').remove(); //添加的内容
} //添加的内容
} //添加的内容

</span></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</code></pre><h5 id="给_GitHub_添加_README">给 GitHub 添加 README</h5><p>把 README.MD 文件的后缀名改成 MDOWN, 放到 source 文件夹下, 这样 Hexo 不会将其解析成网页, GitHub 也会作为 MD 文件解析<br>网站访问量统计</p>
<p>使用 不蒜子 提供的服务</p>
<p>安装脚本</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">async</span> <span class="attribute">src</span>=<span class="value">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</code></pre><p>安装标签</p>
<p>算法a: pv的方式, 单个用户连续点击n篇文章, 记录n次访问量.</p>
<pre><code><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_container_site_pv"</span>&gt;</span>
    本站总访问量<span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_value_site_pv"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>次
<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
</code></pre><p>算法b: uv的方式, 单个用户连续点击n篇文章, 只记录1次访客数.</p>
<pre><code><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_container_site_uv"</span>&gt;</span>
  本站访客数<span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>人次
<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
</code></pre><p>网站运行时间</p>
<p>脚本</p>
<pre><code><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
<span class="keyword">var</span> birthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"11/20/2014"</span>);
<span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();
<span class="keyword">var</span> duration = now.getTime() - birthDay.getTime();
<span class="keyword">var</span> total= <span class="built_in">Math</span>.floor(duration / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));
<span class="built_in">document</span>.getElementById(<span class="string">"showDays"</span>).innerHTML = <span class="string">"本站已运行 "</span>+total+<span class="string">" 天"</span>;
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</code></pre><p>标签</p>
<pre><code><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"showDays"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
</code></pre><p>简体中文/繁体中文切换</p>
<p>下载 js文件 放到主题的 js 文件夹</p>
<p>添加标签</p>
<pre><code><span class="tag">&lt;<span class="title">a</span> <span class="attribute">id</span>=<span class="value">"translateLink"</span> <span class="attribute">href</span>=<span class="value">"javascript:translatePage();"</span>&gt;</span>繁體<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
</code></pre><p>添加脚本</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"/js/tw_cn.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="actionscript">
<span class="keyword">var</span> defaultEncoding = <span class="number">2</span>; <span class="comment">//网站编写字体是否繁体，1-繁体，2-简体</span>
<span class="keyword">var</span> translateDelay = <span class="number">0</span>; <span class="comment">//延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0</span>
<span class="keyword">var</span> cookieDomain = <span class="string">"http://www.arao.me/"</span>; <span class="comment">//Cookie地址, 一定要设定, 通常为你的网址</span>
<span class="keyword">var</span> msgToTraditionalChinese = <span class="string">"繁體"</span>; <span class="comment">//此处可以更改为你想要显示的文字</span>
<span class="keyword">var</span> msgToSimplifiedChinese = <span class="string">"简体"</span>; <span class="comment">//同上，但两处均不建议更改</span>
<span class="keyword">var</span> translateButtonId = <span class="string">"translateLink"</span>; <span class="comment">//默认互换id</span>
translateInitilization();
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

Kill IE6

<span class="comment">&lt;!--[if IE 6]&gt;
  &lt;script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;</span>
</code></pre><h5 id="hexo简要流程">hexo简要流程</h5><p>Hexo首先解析md文件，然后根据layout.ejs判断布局类型，再转发给其他布局文件。在布局中可以引入其他文件，比如</p>
<pre><code>&lt;<span class="preprocessor">%</span>- partial<span class="comment">('_partial/header')</span> <span class="preprocessor">%</span>&gt;
</code></pre><p>这样每一块内容都是单独的，方便二次使用，也可以几个不同布局引用一个代码片段。<br><img src="http://www.huangyunkun.com/images/2014/02/hexo_ejs_1.png" alt="简要流程"></p>
<h4 id="markdown里的一些特殊用法">markdown里的一些特殊用法</h4><h5 id="绘制表格">绘制表格</h5><pre><code><span class="constant">MD</span>写法：
 | 名称 | 属性 | 方法 |
|<span class="symbol">:-----|</span><span class="symbol">:---</span><span class="symbol">:|----------</span><span class="symbol">:|</span>
|测试| **<span class="string">`name`</span>** |test（）|
|测试| **<span class="string">`name`</span>** |test（）|
</code></pre><p>   编译后的效果如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:center">属性</th>
<th style="text-align:right">方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">测试</td>
<td style="text-align:center"><strong><code>name</code></strong></td>
<td style="text-align:right">test（）</td>
</tr>
<tr>
<td style="text-align:left">测试</td>
<td style="text-align:center"><strong><code>name</code></strong></td>
<td style="text-align:right">test（）</td>
</tr>
</tbody>
</table>
<h4 id="绘制流程图">绘制流程图</h4><p> 一个完整示例：</p>
<pre><code>&lt;img src="http://yuml.me/diagram/nofunky/usecase/(note: figure 1.2{bg:beige}),
[<span class="built_ins">User</span>]-(Login),[Site <span class="built_ins">Maintainer</span>]-(<span class="built_ins">Add</span> <span class="built_ins">User</span>),(<span class="built_ins">Add</span> <span class="built_ins">User</span>)&lt;(<span class="built_ins">Add</span> Company),
[Site <span class="built_ins">Maintainer</span>]-(Upload Docs),(Upload Docs)&lt;(Manage Folders),[<span class="built_ins">User</span>]-(Upload Docs),
[<span class="built_ins">User</span>]-(Full Text Search Docs), (Full Text Search Docs)&gt;(Preview Doc),(Full Text Search Docs)&gt;(Download Docs),
[<span class="built_ins">User</span>]-(Browse Docs),(Browse Docs)&gt;(Preview Doc), (Download Docs),
[Site <span class="built_ins">Maintainer</span>]-(Post New Event To The Web Site), [<span class="built_ins">User</span>]-(View Events)" &gt;
</code></pre><p><img src="http://yuml.me/diagram/nofunky/usecase/(note: figure 1.2{bg:beige}),
      [User]-(Login),[Site Maintainer]-(Add User),(Add User)<(Add Company),
      [Site Maintainer]-(Upload Docs),(Upload Docs)<(Manage Folders),[User]-(Upload Docs),
      [User]-(Full Text Search Docs), (Full Text Search Docs)>(Preview Doc),(Full Text Search Docs)>(Download Docs),
      [User]-(Browse Docs),(Browse Docs)>(Preview Doc), (Download Docs),
      [Site Maintainer]-(Post New Event To The Web Site), [User]-(View Events)"><br>-EOF-</p>
<h4 id="添加本地图片">添加本地图片</h4><p>在\hexo\source目录下新建文件夹，命名为images或者其他你喜欢的名字，然后编辑你的md博文，插入下面的代码样式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![&#8220;&#22270;&#29255;&#25551;&#36848;&#8221;](/images/&#20320;&#30340;&#22270;&#29255;&#21517;&#23383;.JPG)</span><br></pre></td></tr></table></figure></p>
<h4 id="插入音乐">插入音乐</h4><p>比如网易云音乐，找到喜欢的歌曲，点击分享按钮，把里面的代码复制下来，直接粘贴到博文中即可</p>
<pre><code>&lt;<span class="tag">iframe</span> frameborder=<span class="string">"no"</span> <span class="attribute">border</span>=<span class="string">"0"</span> marginwidth=<span class="string">"0"</span> marginheight=<span class="string">"0"</span> <span class="attribute">width</span>=<span class="number">330</span> <span class="attribute">height</span>=<span class="number">86</span>   
   src=<span class="string">"http://music.163.com/outchain/player?type=2&amp;id=25706282&amp;auto=0&amp;height=66"</span>&gt;  
&lt;/iframe&gt;   
</code></pre><h4 id="插入视频">插入视频</h4><p>如：</p>
<pre><code><span class="tag">&lt;<span class="title">iframe</span>   
    <span class="attribute">height</span>=<span class="value">498</span> <span class="attribute">width</span>=<span class="value">510</span>   
    <span class="attribute">src</span>=<span class="value">"http://player.youku.com/embed/XNjcyMDU4Njg0"</span>   
    <span class="attribute">frameborder</span>=<span class="value">0</span> <span class="attribute">allowfullscreen</span>&gt;</span>  
<span class="tag">&lt;/<span class="title">iframe</span>&gt;</span>  
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/hexo/">Hexo</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-HTTP与HTTPs区别以及SSL和TLS协议运行机制" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/29/HTTP与HTTPs区别以及SSL和TLS协议运行机制/" class="article-date">
      <time datetime="2014-10-29T02:40:58.000Z" itemprop="datePublished">2014-10-29</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/29/HTTP与HTTPs区别以及SSL和TLS协议运行机制/">HTTP与HTTPs区别以及SSL/TLS协议运行机制</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="HTTP和HTTPS介绍">HTTP和HTTPS介绍</h4><p><img src="http://ximg.tuxi.com.cn/uploadimageschinaz/2015/0828/1440768573966.jpg" alt=""></p>
<h6 id="1-http介绍">1.http介绍</h6><p>超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。1960年美国人Ted Nelson构思了一种通过计算机处理文本信息的方法，并称之为超文本（hypertext）,这成为了HTTP超文本传输协议标准架构的发展根基。Ted Nelson组织协调万维网协会（World Wide Web Consortium）和互联网工程工作小组（Internet Engineering Task Force ）共同合作研究，最终发布了一系列的RFC，其中著名的RFC 2616定义了HTTP 1.1。</p>
<blockquote>
<p>1.0与1.1版本的主要区别</p>
</blockquote>
<pre><code><span class="number">1</span>，HTTP/<span class="number">1.0</span>协议使用非持久连接,即在非持久连接下,一个tcp连接只传输一个Web对象,；
<span class="number">2</span>，HTTP/<span class="number">1.1</span>默认使用持久连接(然而,HTTP/<span class="number">1.1</span>协议的客户机和服务器可以配置成使用非持久连接)。
   在持久连接下,不必为每个Web对象的传送建立一个新的连接,一个连接中可以传输多个对象!
</code></pre><p>图解HTTP推荐看：<a href="http://www.cnblogs.com/xing901022/p/4309840.html" target="_blank" rel="external">图解HTTP(上)</a> 和 <a href="http://www.cnblogs.com/xing901022/p/4311987.html" target="_blank" rel="external">图解HTTP(下)</a></p>
<h6 id="2-https介绍">2.https介绍</h6><p><code>HTTPS</code>（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，简单讲是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。 它是一个URI scheme（抽象标识符体系），句法类同http:体系。用于安全的HTTP数据传输。https:URL表明它使用了HTTP，但HTTPS存在不同于HTTP的默认端口及一个加密/身份验证层（在HTTP与TCP之间）。这个系统的最初研发由网景公司(Netscape)进行，并内置于其浏览器Netscape Navigator中，提供了身份验证与加密通讯方法。</p>
<p>HTTPS工作图解：<br><img src="http://www.nowamagic.net/librarys/images/201212/2012_12_20_01.png" alt=""> <img src="http://image72.360doc.com/DownloadImg/2014/05/1415/41600550_1.png" alt="时序图"></p>
<h6 id="HTTP与HTTPS主要区别">HTTP与HTTPS主要区别</h6><blockquote>
<ol>
<li><code>HTTPS</code>使用端口443，而不是象<code>HTTP</code>那样使用端口80来和TCP/IP进行通信。(不同的连接方式和不同的端口)</li>
<li><code>HTTPS</code>协议需要到ca申请证书，一般免费证书很少，需要交费。</li>
<li>http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议</li>
<li>http的连接很简单,是无状态的。</li>
<li>HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议 要比http协议安全</li>
</ol>
</blockquote>
<h6 id="HTTPS解决的问题">HTTPS解决的问题</h6><blockquote>
<ol>
<li><strong>信任主机的问题</strong>：采用https 的server 必须从CA 申请一个用于证明服务器用途类型的证书. 改证书只有用于对应的server 的时候,客户度才信任次主机.</li>
<li><strong>通讯过程中的数据的泄密和被窜改</strong>：</li>
</ol>
</blockquote>
<pre><code><span class="number">1</span>. 一般意义上的https, 就是 server 有一个证书.
    a) 主要目的是保证server 就是他声称的server. 这个跟第一点一样.
    b) 服务端和客户端之间的所有通讯,都是加密的.
        i. 具体讲,是客户端产生一个对称的密钥,通过server 的证书来交换密钥. 一般意义上的握手过程.
        ii. 接下来所有的信息往来就都是加密的. 第三方即使截获,也没有任何意义.因为他没有密钥. 当然窜改也就没有什么意义了.
<span class="number">2</span>. 少许对客户端有要求的情况下,会要求客户端也必须有一个证书.
    a) 这里客户端证书,其实就类似表示个人信息的时候,除了用户名/密码, 还有一个<span class="variable">CA</span> 认证过的身份. 
       应为个人证书一般来说上别人无法模拟的,所有这样能够更深的确认自己的身份.
    b) 目前少数个人银行的专业版是这种做法,具体证书可能是拿<span class="variable">U</span>盘作为一个备份的载体.
<span class="number">3</span>. <span class="variable">HTTPS</span> 一定是繁琐的.
    a) 本来简单的http协议,一个get一个response. 由于https 要还密钥和确认加密算法的需要.单握手就需要<span class="number">6</span>/<span class="number">7</span> 个往返.
        i. 任何应用中,过多的round trip 肯定影响性能.
    b) 接下来才是具体的http协议,每一次响应或者请求, 都要求客户端和服务端对会话的内容做加密/解密.
        i. 尽管对称加密/解密效率比较高,可是仍然要消耗过多的<span class="variable">CPU</span>,为此有专门的<span class="variable">SSL</span> 芯片. 如果<span class="variable">CPU</span> 信能比较低的话,肯定会降低性能,从而不能serve 更多的请求.
        ii. 加密后数据量的影响. 所以，才会出现那么多的安全认证提示
</code></pre><h6 id="SSL/TLS协议运行机制">SSL/TLS协议运行机制</h6><p>互联网的通信安全，建立在SSL/TLS协议之上。<br>本文简要介绍SSL/TLS协议的运行机制。这里就重点介绍一下设计思想和运行过程，不涉及具体的实现细节。详情请参阅<a href="http://tools.ietf.org/html/rfc5246" target="_blank" rel="external">RFC文档</a>。</p>
<blockquote>
<p><strong>一、历史</strong><br>互联网加密通信协议的历史，几乎与互联网一样长。<br>1994年，NetScape公司设计了SSL协议（Secure Sockets Layer）的1.0版，但是未发布。<br>1995年，NetScape公司发布SSL 2.0版，很快发现有严重漏洞。<br>1996年，SSL 3.0版问世，得到大规模应用。<br>1999年，互联网标准化组织ISOC接替NetScape公司，发布了SSL的升级版TLS 1.0版。<br>2006年和2008年，TLS进行了两次升级，分别为TLS 1.1版和TLS 1.2版。最新的变动是2011年TLS 1.2的修订版。<br>目前，应用最广泛的是TLS 1.0，接下来是SSL 3.0。但是，主流浏览器都已经实现了TLS 1.2的支持。<br>TLS 1.0通常被标示为SSL 3.1，TLS 1.1为SSL 3.2，TLS 1.2为SSL 3.3。</p>
</blockquote>
<hr>
<blockquote>
<p><strong>二、作用</strong><br>不使用SSL/TLS的HTTP通信，就是不加密的通信。所有信息明文传播，带来了三大风险。</p>
</blockquote>
<pre><code>（<span class="number">1</span>） 窃听风险（eavesdropping）：第三方可以获知通信内容。
（<span class="number">2</span>） 篡改风险（tampering）：第三方可以修改通信内容。
（<span class="number">3</span>） 冒充风险（pretending）：第三方可以冒充他人身份参与通信。
</code></pre><p>SSL/TLS协议是为了解决这三大风险而设计的，希望达到：</p>
<pre><code>（<span class="number">1</span>） 所有信息都是加密传播，第三方无法窃听。
（<span class="number">2</span>） 具有校验机制，一旦被篡改，通信双方会立刻发现。
（<span class="number">3</span>） 配备身份证书，防止身份被冒充。
</code></pre><p>互联网是开放环境，通信双方都是未知身份，这为协议的设计带来了很大的难度。而且，协议还必须能够经受所有匪夷所思的攻击，这使得SSL/TLS协议变得异常复杂。</p>
<blockquote>
<p><strong>三、基本的运行过程</strong><br>SSL/TLS协议的基本思路是采用公钥加密法，也就是说，客户端先向服务器端索要公钥，然后用公钥加密信息，服务器收到密文后，用自己的私钥解密。但是，这里有两个问题。</p>
</blockquote>
<p>（1）如何保证公钥不被篡改？</p>
<pre><code>解决方法：将公钥放在数字证书中。只要证书是可信的，公钥就是可信的。
</code></pre><p>（2）公钥加密计算量太大，如何减少耗用的时间？</p>
<pre><code>解决方法：每一次对话（session），客户端和服务器端都生成一个<span class="string">"对话密钥"</span>（session <span class="variable">key</span>），用它来加密信息。
         由于<span class="string">"对话密钥"</span>是对称加密，所以运算速度非常快，而服务器公钥只用于加密<span class="string">"对话密钥"</span>本身，这样就减少了加密运算的消耗时间。
</code></pre><p>因此，SSL/TLS协议的基本过程是这样的：</p>
<pre><code>（<span class="number">1</span>） 客户端向服务器端索要并验证公钥。
（<span class="number">2</span>） 双方协商生成<span class="string">"对话密钥"</span>。
（<span class="number">3</span>） 双方采用<span class="string">"对话密钥"</span>进行加密通信。
</code></pre><p>上面过程的前两步，又称为”握手阶段”（handshake）。</p>
<p>参考资料：</p>
<p>MicroSoft,<a href="https://technet.microsoft.com/zh-cn/library/cc785811(v=ws.10" target="_blank" rel="external"> SSL/TLS in Detail</a>.aspx)<br><a href="http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html" target="_blank" rel="external">The First Few Milliseconds of an HTTPS Connection</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/http-https/">HTTP/HTTPS</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http-https/">HTTP/HTTPS</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 Hank
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>
                
                
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>